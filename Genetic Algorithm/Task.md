### lab-4. Perf tips
____

Цель: ознакомиться с инструментами и подходами, которые позволяют минимизировать аллокации памяти, расходы на GC. Написать решение, которое было бы оптимальным с точки зрения аллокаций и перфоманса.

## Подход к решению лабораторной работы

1. Ознакомьтесь с прикладной областью представленных вариантов, выберите какой-то из них.
2. Напишите минимальную реализацию поставленной задачи, опишите решение в первом пункте отчёта.
3. Соберите метрики: запустите бенчмарки тех частей алгоритмов, которые кажутся наиболее важными, сохраните результаты.
    
    Протестируйте реализацию в dotTrace и dotMemory, сохраните полученные результаты (лучше их как-то подписать, т.к. их будет много).
    
    Во второй пункт отчёта вставьте полученные результаты, а также дополните анализом: опишите проблемы, которые вы можете видеть на трейсах, предполагаемые причины и возможные фиксы.
    
4. Возьмите один из предложенных вариантов исправлений, которые были получены в пункте 3 и
    * реализуйте его,
    * соберите повторно метрики,
    * сравните.
5. Повторите действия из пункта 4. Результаты (как успешные, так и не очень), добавьте в третий пункт отчёта.

## Вариант 1. Генетический алгоритм

Требуется реализовать алгоритм, который по заданным ограничениям будет подбирать оптимальное решение задачи, используя подходы, построенные на генетических алгоритмах.

### Задание

Есть материальная точка, которая находится в точке (0, 0) на плоскости. Точка поддаётся законам механики (у точки есть скорость, а прикладывание силы создаёт ускорение); к ней каждые dt единиц времени прикладывается вектор силы, чтобы повлиять на траекторию движения.

Есть материальная точка, которая находится в точке (0, 0) на плоскости. В каждый момент времени точку можно сдвигать на определённый вектор. Требуется за минимальное количество движений переместиться в позицию (1, 1). При этом нельзя выходить за пределы квадрата.

Входные параменты:

* Максимальная длинна вектор, на которую можно точку сдвинуть за одну единицу времени.
* Пространство, в которое нельзя попадать точке, которое задаётся координатами центра и радиусом (т.е. круги, которые нужно обходить).

### Теоретическая часть

Введём основные понятия:

* Ген — атомарный элемент генотипа и/или хромосомы.

* Хромосома — упорядоченный набор генов.

* Генотип — набор хромосом данной особи.

* Особи — хромосомы с закодированными в них параметрами задачи.

* Популяция — множество особей.

Идея генетических алгоритмов заключается в попытке найти решение для задач, где этот поиск очень сложен или невозможен.

В процессе решения через генетический алгоритм задачу сводят к генам, хромосомам и фитнес функциям. В контексте описанной выше задачи геном можно называть минимальную операцию, а именно применение определённого вектора силы на точку. Из векторов выстраивается список векторов, т.е. некоторая хромосома, которая и представляет собой решение задачи (i-ый ген — это сила, которая прикладывается в i-ый момент времени).

Фитнес функция — это метрика успешности особи. Если говорить про конкретную задачу планирования движения, то такой функцией можно считать количество применённых сил для достижения конца. Но также можно предположить, что далеко не все применения сил будут успешным доведением точки до конца, а значит можно подобрать фитнес функцию, которая поможет лучше добираться до конца.

На хромосому можно применить мутацию. Под мутацией подразумевается процесс создания копии хромосомы с изменёнными генами. Насколько изменёнными — вопрос реализации, но обычно подразумевается изменение одного гена.

Один из сложных вопросов при применении геналго — выбор начальной хромосомы. Самым простым способом может являться взятие рандомных значений или предположительно хорошего решения, которое нужно улучшить.

Более подробно можно изучить тему по книге “Рутковская. - Нейронные сети, генетические алгоритмы и нечеткие системы”.

### GUI

Воспринимать решение чуть проще, если есть визуализация. В организации появился репозиторий с шаблоном, в котором есть первые шаги, чтобы завести GUI. В темплейте есть проект с шаблоном на WPF, который не будет работать на маках. Для маководов можно попробовать взять темплейт с авалонией, она должна запускаться на маках.